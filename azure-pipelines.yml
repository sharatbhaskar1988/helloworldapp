trigger:
- master

pool:
  name: myagent
  demands:
   - agent.name -equals dotnet

steps:
- template: 'templates/restoreandbuild.yml'
  parameters:
   buildConfiguration: 'Debug'

- template: 'templates/restoreandbuild.yml'
  parameters:
   buildConfiguration: 'Release'
    
  
# - template: templates/restoreandbuild.yml
#   parameters:
#     buildConfiguration: 'Debug'

# - template:
#   parameters:
#     buildConfiguration: 'Release'


# - task: DotNetCoreCLI@2
#   inputs:
#     command: 'restore'
#     projects: '**/*.csproj'
#     feedsToUse: 'select'

# - task: DotNetCoreCLI@2
#   inputs:
#     command: 'build'
#     projects: '**/*.csproj'
#     arguments: '--configuration $(buildConfiguration)'

# - task: DotNetCoreCLI@2
#   inputs:
#     command: 'publish'
#     publishWebProjects: true
#     arguments: '--configuration $(buildConfiguration) --output $(Build.ArtifactStagingDirectory)'


- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'drop'
    publishLocation: 'Container'

